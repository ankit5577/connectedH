{"version":3,"file":"static/js/478.136b9280.chunk.js","mappings":"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","sources":["pages/Dashboard.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router\";\nimport AuthStore from \"../services/Auth.state\";\nimport ProductStore from \"../services/Product.state\";\n\nfunction Dashboard() {\n  const authCtx = useContext(AuthStore);\n  const productCtx = useContext(ProductStore);\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [product, setProduct] = useState([]);\n  const [savedProducts, setSavedProducts] = useState(false);\n  // pagination\n  const [currentProducts, setCurrentProducts] = useState(1);\n  const [productsPerPage, setProductsPerPage] = useState(4);\n  const indexOfLastProduct = currentProducts * productsPerPage;\n  const indexOfFirstProduct = indexOfLastProduct - productsPerPage;\n  const paginationProducts = product.slice(\n    indexOfFirstProduct,\n    indexOfLastProduct\n  );\n  // total pages\n  const pageNumbers = [];\n  for (let i = 1; i <= Math.ceil(product.length / productsPerPage); i++) {\n    pageNumbers.push(i);\n  }\n\n  const saveHandler = (product) => {\n    const name = JSON.parse(localStorage.getItem(\"SimEcommerce_user\"))[\"name\"];\n    const savedProducts = JSON.parse(localStorage.getItem(`${name}_user_item`));\n    if (!savedProducts) {\n      localStorage.setItem(`${name}_user_item`, JSON.stringify([product]));\n    } else {\n      const index = savedProducts.findIndex(\n        (response) => response._id === product._id\n      );\n      if (index < 0) {\n        const localProducts = [...savedProducts, product];\n        localStorage.setItem(\n          `${name}_user_item`,\n          JSON.stringify(localProducts)\n        );\n      }\n    }\n  };\n\n  // delete from localstorage\n  const deleteSave = (product) => {\n    const name = JSON.parse(localStorage.getItem(\"SimEcommerce_user\"))[\"name\"];\n    const savedProducts = JSON.parse(localStorage.getItem(`${name}_user_item`));\n    if (!savedProducts) {\n      alert(\"product is already deleted or is unavailable!\");\n    } else {\n      const updatedSavedProducts = savedProducts.filter(\n        (response) => response._id !== product._id\n      );\n      localStorage.setItem(\n        `${name}_user_item`,\n        JSON.stringify(updatedSavedProducts)\n      );\n      setProduct(() => updatedSavedProducts);\n    }\n  };\n\n  useEffect(() => {\n    switch (id) {\n      case undefined:\n        setSavedProducts(() => false);\n        setProduct(() => productCtx.products);\n        break;\n      case \"all\":\n        setSavedProducts(() => false);\n        setProduct(() => productCtx.products);\n        break;\n      case \"saved\":\n        setSavedProducts(() => true);\n        const name = JSON.parse(localStorage.getItem(\"SimEcommerce_user\"))[\n          \"name\"\n        ];\n        const savedProducts = JSON.parse(\n          localStorage.getItem(`${name}_user_item`)\n        );\n        if (savedProducts?.length > 0) {\n          setProduct(() => savedProducts);\n        } else {\n          setProduct(() => []);\n        }\n        break;\n      default:\n        break;\n    }\n  }, [id, productCtx.products]);\n\n  useEffect(() => {\n    if (!authCtx.isLoggedIn) {\n      alert(\"you are not logged in\");\n      navigate(\"/auth\");\n    }\n  }, [authCtx.isLoggedIn, navigate]);\n\n  useEffect(() => {}, [productCtx.products]);\n\n  return (\n    <div className=\"p-4\">\n      <h2 className=\"text-xl md:text-3xl my-3 text-indigo-800 antialiased font-normal md:font-medium\">\n        {savedProducts ? \"Saved Products\" : \"All Products\"}\n      </h2>\n      {paginationProducts.length > 0 && (\n        <div className=\"flex flex-col\">\n          <div className=\"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n            <div className=\"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\">\n              <div className=\"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th\n                        scope=\"col\"\n                        className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                      >\n                        Name\n                      </th>\n\n                      <th\n                        scope=\"col\"\n                        className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                      >\n                        Price\n                      </th>\n                      <th scope=\"col\" className=\"relative px-6 py-3\">\n                        <span className=\"sr-only\">Actions</span>\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {paginationProducts.map((data) => (\n                      <tr key={data._id}>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"flex items-center\">\n                            <div className=\"flex-shrink-0 h-20 w-10 md:w-16\">\n                              <img\n                                className=\"w-10 md:w-16 rounded-xl\"\n                                src={data.imgUrl}\n                                alt=\"\"\n                              />\n                            </div>\n                            <div className=\"ml-4\">\n                              <div className=\"text-sm md:text-xl font-semibold text-gray-600\">\n                                {data.name}\n                              </div>\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <div className=\"text-lg text-gray-900\">\n                            â‚¹{data.price}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                          {!savedProducts && (\n                            <button\n                              onClick={() => saveHandler(data)}\n                              className=\"px-3 py-2 border rounded-lg hover:bg-indigo-600 hover:text-white text-indigo-800\"\n                            >\n                              save\n                            </button>\n                          )}\n                          {savedProducts && (\n                            <button\n                              onClick={() => deleteSave(data)}\n                              className=\"px-3 py-2 border rounded-lg hover:bg-red-600 hover:text-white text-red-600\"\n                            >\n                              delete\n                            </button>\n                          )}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n              <div className=\"max-w-xl mx-auto my-2 overflow-x-auto flex flex-row\">\n                <input\n                  className=\"w-[220px]\"\n                  placeholder={`set products per page ${productsPerPage}`}\n                  onKeyUp={(e) => {\n                    const pagenumber = +e.target.value;\n                    if (Number.isInteger(pagenumber) && pagenumber > 0) {\n                      console.log(pagenumber);\n                      setProductsPerPage(pagenumber);\n                    }\n                  }}\n                />\n                {pageNumbers.map((page) => (\n                  <button\n                    key={page}\n                    onClick={() => setCurrentProducts(page)}\n                    className=\"border p-2 rounded-sm\"\n                  >\n                    {page}\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      {product.length === 0 && (\n        <p className=\"text-lg text-gray-500 md:text-2xl text-center\">\n          No{savedProducts && \" Saved\"} Products Found\n        </p>\n      )}\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"names":["authCtx","useContext","AuthStore","productCtx","ProductStore","id","useParams","navigate","useNavigate","useState","product","setProduct","savedProducts","setSavedProducts","currentProducts","setCurrentProducts","productsPerPage","setProductsPerPage","indexOfLastProduct","indexOfFirstProduct","paginationProducts","slice","pageNumbers","i","Math","ceil","length","push","useEffect","undefined","products","name","JSON","parse","localStorage","getItem","isLoggedIn","alert","className","scope","map","data","src","imgUrl","alt","price","onClick","findIndex","response","_id","localProducts","setItem","stringify","saveHandler","updatedSavedProducts","filter","deleteSave","placeholder","onKeyUp","e","pagenumber","target","value","Number","isInteger","console","log","page"],"sourceRoot":""}